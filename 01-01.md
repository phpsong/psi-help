# 在魔泊云部署

---

>[魔泊云](https://www.mopaas.com) 是开放的融合云平台。
>
>PSI是基于魔泊云PaaS平台量身定制的SaaS ERP系统。
>
>PSI官方强力推荐把PSI部署在魔泊云上。
>
>下面是在魔泊云上部署PSI的详细操作指南。

## 1、登录魔泊云

从 https://www.mopaas.com 登录能看到如下界面。

![](/assets/01-01-01.jpg)

魔泊云的底层IaaS层可以选择阿里云和微软Azure。同时魔泊云还支持多个开发团队使用。

这两个选项可以在上图中选择。如果是首次使用魔泊云，使用默认选项总是不错的选择。

## 2、创建应用

在下图所示的界面中选择 `应用` 页面。

![](/assets/01-01-02.jpg)

将会看到应用列表和 `创建应用` 按钮。

![](/assets/01-01-03.jpg)

单击 `创建应用` 按钮，会出现下面的界面。

![](/assets/01-01-04.jpg)

单击 `PHP` 图标，会出现下图。

![](/assets/01-01-05.jpg)

PSI会自动选择PHP 7.0.6 这个版本来部署。

内存大小根据企业规模选择，因为PSI代码的有效优化，选择256M足够满足50人规模的企业应用。

应用类型选择 `Web应用` 。 

输入应用名称，应用名称用英文，将会称为访问应用的URL的一部分。这里示例用psi2017这个应用名称。

单击 `创建` 按钮后就会成功创建应用，在应用列表里面就能看到创建的应用。

![](/assets/01-01-06.jpg)

## 3、创建MySQL数据库服务

单击应用列表里面的应用链接，进入到应用详情页面。

![](/assets/01-01-07.jpg)

单击 `服务详情` 进入服务详情页面。

![](/assets/01-01-08.jpg)

单击 `创建服务` 按钮，会出现下图界面。

![](/assets/01-01-09.jpg)

单击 `Mysql-docker` 图标，会出现下图界面。

![](/assets/01-01-10.jpg)

数据库大小根据企业需求自行选择，其他选择保持默认值。

输入`服务名称`后单击 `创建` 按钮就会创建MySQL服务。这里我们选择psi2017-db作为服务名称，以便于后文的解说。

创建的服务会在服务列表中出现，如下图的示例。

![](/assets/01-01-11.jpg)

从上图可以看出来，可以创建多个服务。

服务需要和应用绑定后，在应用中才能使用该服务。

在服务列表中，单击 `绑定` 按钮就能完成服务和应用的绑定。

> 一个服务可以被多个应用绑定。
>
>例如多个应用可以共享一个数据库服务的时候。

下图是应用绑定服务后的效果图。

![](/assets/01-01-12.jpg)

## 3、发布代码

从应用详情页面选择`发布管理`。

![](/assets/01-01-13.jpg)

在出现的界面中单击 `普通发布` 按钮。

![](/assets/01-01-14.jpg)

会弹出的对话框让你选择PSI的源代码zip包，选择好后系统就会自动发布。

![](/assets/01-01-16.jpg)

![](/assets/01-01-17.jpg)

到此为止，PSI系统就部署完毕。因为PSI针对魔泊云特别定制了部署代码，所以不需要手工导入数据库SQL脚本，会自动创建数据库表结构。

## 关于源代码zip包的特别说明

在第三步中，需要把PSI代码压缩成zip包，魔泊云对zip包的目录结构有一定要求，这是初次安装的时候最容易遇到的导致部署失败的错误。

这个常见的错误是：打包的时候把顶级目录打包进去，造成在魔泊云上部署失败。

检查zip格式是否正确，可以用winrar打开zip文件，如下图的目录结构就表示打包正确了。

![](/assets/01-01-15.jpg)

注意：.bp-config这个文件夹和里面的文件一定要打包进去，这是魔泊云的配置文件。

## 更多魔泊云的服务支持

详细情况请加入魔泊云的QQ群：378391650，万能的客服为你解决一切魔泊云的问题。 